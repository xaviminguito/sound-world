---
import Layout from '@/layouts/Layout.astro'
import PlayButton from '@/components/PlayButton'
import TrackList from '@/components/TrackList'
import Record from '@/components/Record'
import album from '@/data/album.json';

const { id } = Astro.params

const response = await fetch(
  `https://music-api.charca.workers.dev/albums/${id}`
)
//const album = await response.json()
---

<Layout title={`${album.strAlbum} by ${album.strArtist} - Astro Records`}>
  <section aria-labelledby="page-heading">
    <div
      class="container mx-auto max-w-screen-lg px-6 lg:px-0 flex flex-col items-start md:items-end md:flex-row pt-8 pb-12"
    >
      <Record
        client:visible
        artist={album.strArtist}
        albumId={album.idAlbum}
        title={album.strAlbum}
        imageUrl={album.strAlbumThumb}
      />
      <div class="flex-1 flex flex-col justify-end pt-8">
        <h1 id="page-heading">
          <div id="collection" class="text-5xl font-bold tracking-tight text-gray-900" translate="no">{album.tracks[0].title}</div>
          <div class="mt-3 text-3xl" translate="no">{album.strArtist}</div>
        </h1>
        <div class="mt-2 text-lg" translate="no">{album.strGenre} â€” {album.intYearReleased}</div>
        <div class="mt-3 flex">
          <PlayButton
            tracks={album.tracks}
            albumId={album.idAlbum}
            albumName={album.strAlbum}
            artist={album.strArtist}
            imageUrl={album.strAlbumThumb}
            client:load
          />
        </div>
      </div>
    </div>

    <div class="container mx-auto max-w-screen-lg mb-10">
      <TrackList
        tracks={album.tracks}
        albumId={album.idAlbum}
        albumName={album.strAlbum}
        artist={album.strArtist}
        imageUrl={album.strAlbumThumb}
        client:visible
      />
    </div>
  </section>
</Layout>
